{"version":3,"sources":["node_modules/browser-pack/_prelude.js","package.json","src/js/MVC/Controller.js","src/js/MVC/Model.js","src/js/MVC/View.js","src/js/MVC/controllers/ControllerDeliveryPayment.js","src/js/MVC/controllers/ControllerEmail.js","src/js/MVC/controllers/ControllerPassword.js","src/js/MVC/models/customers.js","src/js/MVC/models/giftcards.js","src/js/MVC/models/orderSummary.js","src/js/MVC/models/promocodes.js","src/js/MVC/views/ViewDeliveryPayment.js","src/js/MVC/views/ViewEmail.js","src/js/MVC/views/ViewLoader.js","src/js/MVC/views/ViewPassword.js","src/js/MVC/views/ViewPlaceOrder.js","src/js/MVC/views/ViewSummary.js","src/js/Main.js","src/js/config.js","src/js/utils/jquery.ui.shake.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","name","version","description","main","repository","type","url","license","author","email","dependencies","gsap","devDependencies","babel-preset-es2015","babelify","browser-sync","browserify","gulp","gulp-connect","gulp-notify","gulp-rename","gulp-sass","gulp-sourcemaps","gulp-uglify","gulp-uglifycss","http-server","nodemon","vinyl-buffer","vinyl-source-stream","keywords","_ControllerEmail","_ControllerPassword","_ControllerDeliveryPayment","Controller","_classCallCheck","this","shortName","controllers","_ControllerEmail2","default","password","_ControllerPassword2","deliverypayment","_ControllerDeliveryPayment2","dependents","Model","data","importModels","setOrder","config","orderSummary","customers","promocodes","giftcards","jQuery","val","JSON","stringify","order","customerType","firstName","lastName","deliveryAddress","billToDifferentAddress","authorityToLeave","paymentMethod","newsletter","subtotal","discounts","shipping","grandtotal","debugger","key","value","push","calculateOrderTotal","v","showTotals","shakeField","m","views","loader","show","setTimeout","customer","allCustomers","hide","bind","emailCheckDelay","updateOrder","phonenumber","Number","price","freeShippingMin","_i","Math","round","amount","_i2","sku","summary","splice","option","fadeIn","animationDuration","attr","_ViewDeliveryPayment","_ViewEmail","_ViewLoader","_ViewPassword","_ViewPlaceOrder","_ViewSummary","View","_ViewSummary2","_ViewEmail2","_ViewPassword2","_ViewDeliveryPayment2","_ViewLoader2","placeorder","_ViewPlaceOrder2","field","removeClass","addClass","cssTransitionDuration","shake","html","codes","_codes","shortfall","ControllerDeliveryPayment","_this","window","unbind","deliveryField","google","maps","places","Autocomplete","document","getElementById","types","callback","fillInDelivery","geolocate","addListener","getPlace","click","showManualDelivery","event","is","showAuthorityToLeave","hideAuthorityToLeave","focusout","billingField","fillInBilling","hideBillingAddress","hideManualBilling","showBillingAddress","showManualBilling","setPaymentMethod","target","id","hover","src","applyPromo","toUpperCase","redeemGift","autocomplete","_this2","validateOrder","navigator","geolocation","getCurrentPosition","position","lat","coords","latitude","lng","longitude","circle","Circle","center","radius","accuracy","setBounds","getBounds","place","numComponents","address_components","street0","short_name","street1","street2","streetAddress","city","state","postcode","billingAddress","console","log","orderReady","firstErrorField","removeTick","addTick","submitOrder","focus","ControllerEmail","c","checkValidity","keypress","keyCode","validity","validateEmail","valid","showError","message","reEmail","match","ControllerPassword","validatePassword","addExistingCustomer","cId","country","billing","businessName","title","image","desc","size","colour","ViewDeliveryPayment","getDeliveryContent","getPaymentContent","setUI","fadeOut","phone","ViewEmail","getContent","getCustomerByEmail","defaultEmail","ViewLoader","ViewPassword","defaultPassword","ViewPlaceOrder","ViewSummary","summaryArr","div","_Model","_View","_Controller","_package","_jqueryUi","Main","_Model2","_View2","_Controller2","setDependents","ready","vs","_package2","loadingDelay","$","fn","extend","direction","distance","times","speed","easing","each","el","props","css","top","bottom","left","right","ref","motion","animation","animation1","animation2","animate","apply","arguments"],"mappings":"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","file":"aligent-checkitout.min.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports={\n  \"name\": \"checkitout\",\n  \"version\": \"1.8.0\",\n  \"description\": \"JavaScript/Sass App for Aligent_CheckItOut Module\",\n  \"main\": \"src/js/Main.js\",\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://bitbucket.org/aligent/ecomdev_checkitout_developer\"\n  },\n  \"license\": \"OSL-3.0\",\n  \"author\": {\n    \"name\": \"Chris Dorward\",\n    \"email\": \"chris.dorward@aligent.com.au\"\n  },\n  \"dependencies\": {\n    \"gsap\": \"^1.19.1\"\n  },\n  \"devDependencies\": {\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babelify\": \"^7.3.0\",\n    \"browser-sync\": \"^2.18.12\",\n    \"browserify\": \"^14.3.0\",\n    \"gulp\": \"^3.9.1\",\n    \"gulp-connect\": \"^5.0.0\",\n    \"gulp-notify\": \"^3.0.0\",\n    \"gulp-rename\": \"^1.2.2\",\n    \"gulp-sass\": \"^3.1.0\",\n    \"gulp-sourcemaps\": \"^2.6.0\",\n    \"gulp-uglify\": \"^2.1.2\",\n    \"gulp-uglifycss\": \"^1.0.8\",\n    \"http-server\": \"^0.10.0\",\n    \"nodemon\": \"^1.11.0\",\n    \"vinyl-buffer\": \"^1.0.0\",\n    \"vinyl-source-stream\": \"^1.1.0\"\n  },\n  \"keywords\": [\n    \"JavaScript\",\n    \"ES6\",\n    \"Sass\",\n    \"MVC\"\n  ]\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/Controller.js\n * Handles anything to do with user interaction\n *\n */\n\nimport ControllerEmail from './controllers/ControllerEmail';\nimport ControllerPassword from './controllers/ControllerPassword';\nimport ControllerDeliveryPayment from './controllers/ControllerDeliveryPayment';\n\nexport default class Controller {\n\n  constructor(main) {\n    this.main = main;\n    this.shortName = 'c';\n    this.controllers = {};\n    this.controllers.email = new ControllerEmail (main);\n    this.controllers.password = new ControllerPassword (main);\n    this.controllers.deliverypayment = new ControllerDeliveryPayment (main);\n  }\n\n  setDependents(dependents) {\n    // Set Dependent MVC Classes\n    // See https://tinyurl.com/yaqgy73w\n    for (let i=0; i<dependents.length; i++){\n      this[dependents[i].shortName] = dependents[i];\n    }\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/Model.js\n * Load and manipulate data model\n *\n */\n\nexport default class Model {\n\n  constructor(main) {\n    this.main = main;\n    this.shortName = 'm';\n\n    // The Model Class is our run-time data store.\n    // We could use Redux if we were feeling flash.\n    // In this case we'll keep our data in an object called 'data'\n    // here in the Model class which can be accessed from anywhere\n    this.data = {};\n\n    // Import data models from the ./models directory\n    this.importModels ();\n\n    // Set up a customer object ready to be populated during runtime\n    this.setOrder ();\n  }\n\n  setDependents(dependents) {\n    // Set Dependent MVC Classes\n    // See https://tinyurl.com/yaqgy73w\n    for (let i=0; i<dependents.length; i++){\n      this[dependents[i].shortName] = dependents[i];\n    }\n  }\n\n  importModels (){\n    // Example data models for Ajax integration\n    // config\n    const config = require('../config');\n    this.data.config = config.default.config;\n    // orderSummary\n    const orderSummary = require('./models/orderSummary');\n    this.data.orderSummary = orderSummary.default.orderSummary;\n    // customers\n    const customers = require('./models/customers');\n    this.data.customers = customers.default.customers;\n    // promocodes\n    const promocodes = require('./models/promocodes');\n    this.data.promocodes = promocodes.default.promocodes;\n    // giftcards\n    const giftcards = require('./models/giftcards');\n    this.data.giftcards = giftcards.default.giftcards;\n  }\n\n  debugger (){\n    jQuery('#debugger').val(JSON.stringify(this.data.order, null, \"\\t\"));\n  }\n\n  setOrder (){\n    // Once this data model is populated, and order can be placed\n    this.data.order = {\n      'email': '',\n      'customerType': '',\n      'firstName': '',\n      'lastName': '',\n      'deliveryAddress': '',\n      'billToDifferentAddress': '',\n      'authorityToLeave': '',\n      'paymentMethod': '',\n      'newsletter': '',\n      'promocodes': [],\n      'giftcards': [],\n      'subtotal': '',\n      'discounts': '',\n      'shipping': '',\n      'grandtotal': ''\n    };\n    this.debugger ();\n  }\n\n  updateOrder (key, value){\n    this.data.order[key] = value;\n    this.debugger ();\n  }\n\n  redeemGift (code) {\n    // Check the supplied code against the model and update totals if it's good\n    for (let i=0; i<this.data.giftcards.length; i++) {\n      if (this.data.giftcards[i].code === code){\n        this.data.order.giftcards.push(this.data.giftcards[i]);\n        jQuery('#giftcard').val('');\n        this.calculateOrderTotal ();\n        this.main.v.showTotals ();\n        this.debugger ();\n        return;\n      }\n    }\n    this.main.v.shakeField(jQuery('#giftcard'));\n    return;\n  }\n\n  applyPromo (code) {\n    // Check the supplied code against the model and update totals if it's good\n    for (let i=0; i<this.data.promocodes.length; i++) {\n      if (this.data.promocodes[i].code === code){\n        this.data.order.promocodes.push(this.data.promocodes[i]);\n        jQuery('#promocode').val('');\n        this.calculateOrderTotal ();\n        this.main.v.showTotals ();\n        this.debugger ();\n        return;\n      }\n    }\n    this.main.v.shakeField(jQuery('#promocode'));\n    return;\n  }\n\n  getCustomerByEmail (){\n    this.main.m.data.order.email = jQuery('#email-address').val();\n    this.main.v.views.loader.show('Checking email...');\n    // wait a short time to simulate an ajax load\n    // Checks for customer existence ../models/customers.json.\n    // Returns a customer object if found, false if not\n    setTimeout(function() {\n      this.main.m.data.customer = false;\n      let allCustomers = this.main.m.data.customers;\n      for (let i=0; i<allCustomers.length; i++){\n        if ( this.main.m.data.order.email === allCustomers[i].email){\n          this.main.m.data.customer = allCustomers[i];\n        }\n      }\n      this.main.v.views.loader.hide();\n    }.bind(this), this.main.m.data.config.emailCheckDelay);\n  }\n\n  addExistingCustomer() {\n    this.updateOrder('firstName', this.main.m.data.customer.firstName);\n    this.updateOrder('lastName', this.main.m.data.customer.lastName);\n    this.updateOrder('deliveryAddress', this.main.m.data.customer.deliveryAddress);\n    this.updateOrder('phonenumber', this.main.m.data.customer.phonenumber);\n  }\n\n  calculateOrderTotal (){\n    // Quick & dirty math to calculate totals.\n    // Probably won't be needed when app is using ajax\n    let subtotal = 0;\n    let discounts = 0;\n    let shipping = 0;\n    let grandtotal = 0;\n    for (let i=0; i<this.data.orderSummary.length; i++){\n      subtotal += Number(this.data.orderSummary[i].price);\n    }\n    if (subtotal <= this.data.config.freeShippingMin){\n      shipping = 10;\n    }\n\n    for (let i=0; i<this.data.order.promocodes.length; i++){\n      if (this.data.order.promocodes[i].type === 'percent'){\n        discounts = Math.round (((subtotal/100)*this.data.order.promocodes[i].amount)*100)/100;\n      }\n    }\n\n    for (let i=0; i<this.data.order.giftcards.length; i++){\n      discounts = this.data.order.giftcards[i].amount;\n    }\n\n    grandtotal = Math.round (((subtotal - discounts) + shipping)*100)/100;\n    this.m.updateOrder ('subtotal', subtotal);\n    this.m.updateOrder ('discounts', discounts);\n    this.m.updateOrder ('shipping', shipping);\n    this.m.updateOrder ('grandtotal', grandtotal);\n  }\n\n  removeOrderItem (sku) {\n    // Pop an order item out of the orderSummary array by sku\n    for(var i = this.data.summary.length - 1; i >= 0; i--) {\n      if(this.data.summary[i].sku === sku) {\n        this.data.summary.splice(i, 1);\n      }\n    }\n  }\n\n  setPaymentMethod(option) {\n    switch(option) {\n      case 'card':\n        jQuery('#card-div').fadeIn(this.main.m.data.config.animationDuration);\n        jQuery('#paypal-div').hide();\n        jQuery('#afterpay-div').hide();\n        jQuery('#card').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/card_over.png');\n        jQuery('#paypal').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/paypal.png');\n        jQuery('#afterpay').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/afterpay.png');\n        break;\n      case 'paypal':\n        jQuery('#card-div').hide();\n        jQuery('#paypal-div').fadeIn(this.main.m.data.config.animationDuration);\n        jQuery('#afterpay-div').hide();\n        jQuery('#card').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/card.png');\n        jQuery('#paypal').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/paypal_over.png');\n        jQuery('#afterpay').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/afterpay.png');\n        break;\n      case 'afterpay':\n        jQuery('#card-div').hide();\n        jQuery('#paypal-div').hide();\n        jQuery('#afterpay-div').fadeIn(this.main.m.data.config.animationDuration);\n        jQuery('#card').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/card.png');\n        jQuery('#paypal').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/paypal.png');\n        jQuery('#afterpay').attr('src', 'http://listingslab.com/wp-content/uploads/2017/06/afterpay_over.png');\n        break;\n      default:\n    }\n    this.m.updateOrder ('paymentMethod', option);\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/View.js\n * Handles everything to do with displaying, logging & rendering\n *\n */\n\nimport ViewDeliveryPayment from './views/ViewDeliveryPayment';\nimport ViewEmail from './views/ViewEmail';\nimport ViewLoader from './views/ViewLoader';\nimport ViewPassword from './views/ViewPassword';\nimport ViewPlaceOrder from './views/ViewPlaceOrder';\nimport ViewSummary from './views/ViewSummary';\n\nexport default class View {\n\n  constructor(main) {\n    this.main = main;\n    this.shortName = 'v';\n    this.views = {};\n    this.views.summary = new ViewSummary (main);\n    this.views.email = new ViewEmail (main);\n    this.views.password = new ViewPassword (main);\n    this.views.deliverypayment = new ViewDeliveryPayment (main);\n    this.views.loader = new ViewLoader (main);\n    this.views.placeorder = new ViewPlaceOrder (main);\n  }\n\n  setDependents(dependents) {\n    // Set Dependent MVC Classes\n    // See https://tinyurl.com/yaqgy73w\n    for (let i=0; i<dependents.length; i++){\n      this[dependents[i].shortName] = dependents[i];\n    }\n  }\n\n  shakeField(field) {\n    jQuery(field).removeClass('input-error-fade');\n    jQuery(field).addClass('input-error');\n    setTimeout(function(){\n      jQuery(field).addClass('input-error-fade');\n    }, this.main.m.data.config.cssTransitionDuration );\n    jQuery(field).shake();\n  }\n\n  showTotals (){\n    jQuery('#subtotal').html(`$${this.m.data.order.subtotal}`);\n    if (this.m.data.order.discounts === 0){\n      jQuery('.discounts').hide();\n    }else{\n      jQuery('#discounts').html(`-$${this.m.data.order.discounts}`);\n      jQuery('.discounts').fadeIn(this.main.m.data.config.animationDuration);\n    }\n\n    if (this.m.data.order.promocodes.length === 0){\n      jQuery('.promocodes').hide();\n    }else{\n      let codes = '';\n      for (let i=0; i<this.m.data.order.promocodes.length; i++) {\n        codes += `<strong>${this.m.data.order.promocodes[i].code}</strong>`;\n        if (i<this.m.data.order.promocodes.length){\n          codes += '<br />';\n        }\n      }\n      jQuery('#promocodes').html(codes);\n      jQuery('.promocodes').fadeIn(this.main.m.data.config.animationDuration);\n    }\n\n    if (this.m.data.order.giftcards.length === 0){\n      jQuery('.giftcards').hide();\n    }else{\n      let codes = '';\n      for (let i=0; i<this.m.data.order.giftcards.length; i++) {\n        codes += `<strong>${this.m.data.order.giftcards[i].code}</strong>`;\n        if (i<this.m.data.order.giftcards.length){\n          codes += '<br />';\n        }\n      }\n      jQuery('#giftcards').html(codes);\n      jQuery('.giftcards').fadeIn(this.main.m.data.config.animationDuration);\n    }\n\n    if (this.m.data.order.shipping === 0){\n      jQuery('#shipping-message').html(`Enjoy <span class=\"bold\">FREE EXPRESS SHIPPING</span> on us!`);\n      jQuery('#shipping').html(`FREE`);\n    } else {\n      let shortfall = Math.round((this.m.data.config.freeShippingMin - this.m.data.order.subtotal) * 100) / 100;\n      jQuery('#shipping-message').html(`You are AUD <span class=\"bold\">$${shortfall}</span> away from FREE SHIPPING`);\n      jQuery('#shipping').html(`$${this.m.data.order.shipping}`);\n    }\n    jQuery('#grandtotal').html(`$${this.m.data.order.grandtotal}`);\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/controllers/ControllerDeliveryPayment.js\n * Delivery Screen UI\n *\n */\n\nexport default class ControllerDeliveryPayment {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  setUI (){\n    jQuery(window).unbind('keypress');\n\n    // Setup the google places auto fill address sccreen\n    // https://developers.google.com/maps/documentation/javascript/places-autocomplete\n    this.deliveryField = new google.maps.places.Autocomplete(\n      (document.getElementById('delivery-address')),{\n        types: ['geocode'],\n        main: this.main,\n        callback:this.fillInDelivery,\n      });\n    this.geolocate(this.deliveryField);\n    this.deliveryField.addListener('place_changed', function (){\n      jQuery('#delivery-address').val('');\n      this.callback(this.getPlace());\n    });\n\n    jQuery('#delivery-manual-hidden').hide();\n    jQuery('#address-not-found').click(()=>{\n      this.main.v.views.deliverypayment.showManualDelivery();\n      return false;\n    });\n\n    // Set default authorityToLeave signup to no\n    if (this.main.m.data.order.authorityToLeave === ''){\n      this.main.m.updateOrder ('authorityToLeave', 'no');\n      jQuery('#input-leave-info').hide();\n    }\n    jQuery('#authority-to-leave').click(function(event) {\n      if (jQuery('#authority-to-leave').is(':checked')){\n        this.main.m.updateOrder ('authorityToLeave', 'yes');\n        this.main.v.views.deliverypayment.showAuthorityToLeave();\n      }else{\n        this.main.m.updateOrder ('authorityToLeave', 'no');\n        this.main.v.views.deliverypayment.hideAuthorityToLeave();\n      }\n    }.bind(this));\n\n    jQuery('#firstname').focusout(()=>{\n      this.main.m.updateOrder ('firstName', jQuery('#firstname').val());\n    });\n\n    jQuery('#delivery-address').focusout(()=>{\n      this.main.m.updateOrder ('deliveryAddress', jQuery('#delivery-address').val());\n    });\n\n    jQuery('#billing-firstname').focusout(()=>{\n      this.main.m.updateOrder ('billingFirstName', jQuery('#billing-firstname').val());\n    });\n\n    jQuery('#billing-lastname').focusout(()=>{\n      this.main.m.updateOrder ('billingLastName', jQuery('#billing-lastname').val());\n    });\n\n    jQuery('#lastname').focusout(()=>{\n      this.main.m.updateOrder ('lastName', jQuery('#lastname').val());\n    });\n\n    jQuery('#input-leave-info').focusout(()=>{\n      this.main.m.updateOrder ('authorityToLeaveInfo', jQuery('#input-leave-info').val());\n    });\n\n    jQuery('#businessname').focusout(()=>{\n      this.main.m.updateOrder ('businessname', jQuery('#businessname').val());\n    });\n\n    jQuery('#phonenumber').focusout(()=>{\n      this.main.m.updateOrder ('phonenumber', jQuery('#phonenumber').val());\n    });\n\n    // Set default bill to different address as no\n    // Setup the google places auto fill address sccreen\n    // https://developers.google.com/maps/documentation/javascript/places-autocomplete\n    this.billingField = new google.maps.places.Autocomplete(\n      (document.getElementById('billing-address')),{\n        types: ['geocode'],\n        main: this.main,\n        callback:this.fillInBilling\n      });\n    this.geolocate(this.billingField);\n    this.billingField.addListener('place_changed', function (){\n      jQuery('#billing-address').val('');\n      this.callback(this.getPlace());\n    });\n\n    if (this.main.m.data.order.billToDifferentAddress === ''){\n      this.main.m.updateOrder ('billToDifferentAddress', 'no');\n      this.main.v.views.deliverypayment.hideBillingAddress();\n      this.main.v.views.deliverypayment.hideManualBilling();\n    }\n    jQuery('#bill-to-different').click(function(event) {\n      if (jQuery('#bill-to-different').is(':checked')){\n        this.main.m.updateOrder ('billToDifferentAddress', 'yes');\n        this.main.v.views.deliverypayment.showBillingAddress();\n      }else{\n        this.main.m.updateOrder ('billToDifferentAddress', 'no');\n        this.main.v.views.deliverypayment.hideBillingAddress();\n      }\n    }.bind(this));\n\n    jQuery('#billing-address-not-found').click(()=>{\n      this.main.v.views.deliverypayment.showManualBilling();\n      return false;\n    });\n\n    // Set default payment method to paypal\n    if (this.main.m.data.order.paymentMethod === ''){\n      this.main.m.setPaymentMethod('paypal');\n    }\n\n    jQuery('.payment-option').click(function(event) {\n      this.main.m.setPaymentMethod(event.target.id);\n    }.bind(this));\n\n    jQuery('.payment-option').hover(\n      function(event) {\n        if (event.target.id !== this.main.m.data.order.paymentMethod){\n          event.target.src = `http://listingslab.com/wp-content/uploads/2017/06/${event.target.id}_over.png`;\n        }\n      }.bind(this),\n\n      function(event) {\n        if (event.target.id !== this.main.m.data.order.paymentMethod) {\n          event.target.src = `http://listingslab.com/wp-content/uploads/2017/06/${event.target.id}.png`;\n        }\n      }.bind(this)\n    );\n\n    jQuery('#apply-promo').click((event)=>{\n      this.main.m.applyPromo(jQuery('#promocode').val().toUpperCase());\n    });\n\n    jQuery('#redeem-giftcard').click((event)=>{\n      this.main.m.redeemGift(jQuery('#giftcard').val());\n    });\n\n    // Set default newsletter signup as yes\n    if (this.main.m.data.order.newsletter === ''){\n      this.main.m.updateOrder ('newsletter', 'yes');\n    }\n    jQuery('#newsletter-signup').click(function(event) {\n      if (jQuery('#newsletter-signup').is(':checked')){\n        this.main.m.updateOrder ('newsletter', 'yes');\n      }else{\n        this.main.m.updateOrder ('newsletter', 'no');\n      }\n    }.bind(this));\n\n    //   if (event.keyCode === 13) {\n    //     this.validateOrder();\n    //   }\n    // });\n  }\n\n  geolocate(autocomplete) {\n    // Bias the autocomplete object to the user's geographical location,\n    jQuery('#place-order').click((event)=>{\n      this.validateOrder();\n    });\n\n    // jQuery(window).keypress((event) => {\n    // as supplied by the browser's 'navigator.geolocation' object.\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(function(position) {\n        const geolocation = {\n          lat: position.coords.latitude,\n          lng: position.coords.longitude\n        };\n        const circle = new google.maps.Circle({\n          center: geolocation,\n          radius: position.coords.accuracy\n        });\n        autocomplete.setBounds(circle.getBounds());\n      });\n    }\n  }\n\n  fillInDelivery (place){\n    let numComponents = place.address_components.length;\n    const street0 = place.address_components[0].short_name || '';\n    const street1 = place.address_components[1].short_name || '';\n    const street2 = place.address_components[2].short_name || '';\n    let streetAddress = `${street0} ${street1}`;\n    if (numComponents === 8){\n      streetAddress = `${street0} ${street1} ${street2}`;\n    }\n    jQuery('#delivery-street-address').val(streetAddress);\n    const city = place.address_components[numComponents-5].short_name;\n    jQuery('#delivery-city').val(city);\n    const state = place.address_components[numComponents-3].short_name;\n    jQuery('#delivery-state').val(state);\n    const postcode = place.address_components[numComponents-1].short_name;\n    jQuery('#delivery-postcode').val(postcode);\n    const deliveryAddress = `${streetAddress}, ${city}, ${state}, ${postcode}`;\n    jQuery('#delivery-address').val(deliveryAddress);\n    this.main.m.updateOrder ('deliveryAddress', deliveryAddress);\n  }\n\n  fillInBilling (place){\n    let numComponents = place.address_components.length;\n    const street0 = place.address_components[0].short_name || '';\n    const street1 = place.address_components[1].short_name || '';\n    const street2 = place.address_components[2].short_name || '';\n    let streetAddress = `${street0} ${street1}`;\n    if (numComponents === 8){\n      streetAddress = `${street0} ${street1} ${street2}`;\n    }\n    jQuery('#billing-street-address').val(streetAddress);\n    const city = place.address_components[numComponents-5].short_name;\n    jQuery('#billing-city').val(city);\n    const state = place.address_components[numComponents-3].short_name;\n    jQuery('#billing-state').val(state);\n    const postcode = place.address_components[numComponents-1].short_name;\n    jQuery('#billing-postcode').val(postcode);\n    const billingAddress = `${streetAddress}, ${city}, ${state}, ${postcode}`;\n    jQuery('#billing-address').val(billingAddress);\n    this.main.m.updateOrder ('billingAddress', billingAddress);\n    console.log('this.main.m.updateOrder');\n\n  }\n\n  addTick(field) {\n    jQuery(field).removeClass ('input-error');\n    jQuery(field).addClass ('input-ticked');\n\n  }\n\n  removeTick(field) {\n    jQuery(field).removeClass ('input-ticked');\n  }\n\n  validateOrder() {\n    let orderReady = true;\n    let firstErrorField = false;\n\n    // firstname field must not be blank\n    if (jQuery('#firstname').val() === ''){\n      this.main.v.shakeField(jQuery('#firstname'));\n      this.removeTick(jQuery('#firstname'));\n      orderReady = false;\n      firstErrorField = jQuery('#firstname');\n    } else {\n      this.addTick(jQuery('#firstname'));\n    }\n\n    // lastname field must not be blank\n    if (jQuery('#lastname').val() === ''){\n      this.main.v.shakeField(jQuery('#lastname'));\n      this.removeTick(jQuery('#lastname'));\n      orderReady = false;\n      if (!firstErrorField){\n        firstErrorField = jQuery('#lastname');\n      }\n    } else {\n      this.addTick(jQuery('#lastname'));\n    }\n\n    // delivery address field must not be blank\n    if (jQuery('#delivery-address').val() === ''){\n      this.main.v.shakeField(jQuery('#delivery-address'));\n      this.removeTick(jQuery('#delivery-address'));\n      orderReady = false;\n      if (!firstErrorField) {\n        firstErrorField = jQuery('#delivery-address');\n      }\n    } else {\n      this.addTick(jQuery('#delivery-address'));\n    }\n\n    if (this.main.m.data.order.billToDifferentAddress === 'yes'){\n      // billing firstname must not be blank\n      if (jQuery('#billing-firstname').val() === ''){\n        this.main.v.shakeField(jQuery('#billing-firstname'));\n        this.removeTick(jQuery('#billing-firstname'));\n        orderReady = false;\n        firstErrorField = jQuery('#billing-firstname');\n      } else {\n        this.addTick(jQuery('#billing-firstname'));\n      }\n\n      // billing lastname must not be blank\n      if (jQuery('#billing-lastname').val() === ''){\n        this.main.v.shakeField(jQuery('#billing-lastname'));\n        this.removeTick(jQuery('#billing-lastname'));\n        orderReady = false;\n        firstErrorField = jQuery('#billing-lastname');\n      } else {\n        this.addTick(jQuery('#billing-lastname'));\n      }\n\n      // billing address must not be blank\n      if (jQuery('#billing-address').val() === ''){\n        this.main.v.shakeField(jQuery('#billing-address'));\n        this.removeTick(jQuery('#billing-address'));\n        orderReady = false;\n        firstErrorField = jQuery('#billing-address');\n      } else {\n        this.addTick(jQuery('#billing-address'));\n      }\n\n    }\n\n    if (this.main.m.data.order.paymentMethod === 'card'){\n      // card number must not be blank\n      if (jQuery('#cardnumber').val() === ''){\n        this.main.v.shakeField(jQuery('#cardnumber'));\n        this.removeTick(jQuery('#cardnumber'));\n        orderReady = false;\n        firstErrorField = jQuery('#cardnumber');\n      } else {\n        this.addTick(jQuery('#cardnumber'));\n      }\n\n      // expiry must not be blank\n      if (jQuery('#expiry').val() === ''){\n        this.main.v.shakeField(jQuery('#expiry'));\n        this.removeTick(jQuery('#expiry'));\n        orderReady = false;\n        firstErrorField = jQuery('#expiry');\n      } else {\n        this.addTick(jQuery('#expiry'));\n      }\n\n      // cvc must not be blank\n      if (jQuery('#cvc').val() === ''){\n        this.main.v.shakeField(jQuery('#cvc'));\n        this.removeTick(jQuery('#cvc'));\n        orderReady = false;\n        firstErrorField = jQuery('#cvc');\n      } else {\n        this.addTick(jQuery('#cvc'));\n      }\n    }\n\n\n    // Submit the order if it's ready this.addTick(jQuery('#delivery-address'));\n    if (orderReady){\n      this.submitOrder ();\n    }else{\n      setTimeout(function(){\n        jQuery(firstErrorField).focus();\n      }, 500);\n    }\n\n  }\n  submitOrder (){\n    this.main.v.views.summary.hide();\n    this.main.v.views.deliverypayment.hide();\n    this.main.v.views.placeorder.show();\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/controllers/ControllerEmail.js\n * Email Screen UI\n *\n */\n\nexport default class ControllerEmail {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  setUI (){\n    jQuery(window).unbind('keypress');\n    jQuery('#email-continue').click((event)=>{\n      this.main.c.controllers.email.checkValidity();\n    });\n    jQuery(window).keypress((event)=>{\n      if (event.keyCode === 13) {\n        this.main.c.controllers.email.checkValidity();\n      }\n    });\n  }\n\n  checkValidity (){\n    const validity = this.validateEmail (jQuery('#email-address').val());\n    if (!validity.valid){\n      this.main.v.views.email.showError(validity.message);\n    } else {\n      this.main.v.views.email.hide();\n    }\n  }\n\n  validateEmail (email){\n    // Check for empty field\n    if (email === ''){\n      return {\n        valid: false,\n        message: 'Enter your email address'\n      };\n    } else {\n      // Check for a valid email address (@ sign, tld etc)\n      // returns true if valid, false if not. http://hexillion.com/samples/\n      const reEmail = /^(?:[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+\\.)*[\\w\\!\\#\\$\\%\\&\\'\\*\\+\\-\\/\\=\\?\\^\\`\\{\\|\\}\\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!\\.)){0,61}[a-zA-Z0-9]?\\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\\[(?:(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\.){3}(?:[01]?\\d{1,2}|2[0-4]\\d|25[0-5])\\]))$/;\n      if(!email.match(reEmail)) {\n        return {\n          valid: false,\n          message: 'Not a valid email address'\n        };\n      }\n    }\n    return {\n      valid: true\n    };\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/controllers/ControllerPassword.js\n * Password Screen UI\n *\n */\n\nexport default class ControllerPassword {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  setUI (){\n    jQuery(window).unbind('keypress');\n    jQuery('#password-continue').click((event)=>{\n      this.checkValidity();\n    });\n    jQuery(window).keypress((event)=>{\n      if (event.keyCode === 13) {\n        this.checkValidity();\n      }\n    });\n  }\n\n  checkValidity (){\n    const validity = this.validatePassword (jQuery('#password').val());\n    if (!validity.valid){\n      this.main.v.views.password.showError(validity.message);\n    } else {\n      this.main.v.views.password.hide();\n    }\n  }\n\n  validatePassword (password) {\n    if (this.main.m.data.order.customerType === 'new'){\n      if (password !== '' && password.length > 5){\n        return {\n          valid: true\n        };\n      }else{\n        return {\n          valid: false,\n          message: 'Please enter 6 or more characters.'\n        };\n      }\n    } else {\n      if (this.main.m.data.customer.password === password) {\n        this.main.m.addExistingCustomer();\n        return {\n          valid: true\n        };\n      }else{\n        return {\n          valid: false,\n          message: 'Incorrect password.'\n        };\n      }\n    }\n    return false;\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/maodels/customers.js\n * Example Customers Model\n *\n */\n\nexport default {\n    \"customers\": [\n        {\n          \"cId\": \"000001\",\n          \"email\": \"chris.dorward@aligent.com.au\",\n          \"firstName\": \"Chris\",\n          \"lastName\": \"Dorward\",\n          \"password\": \"password\",\n          \"deliveryAddress\": \"58 Hampton St S, Goodwood, SA 5034\",\n          \"country\": \"Australia\",\n          \"billing\": \"200 Goodwood Road, Goodwood, SA 5034\"\n        },\n        {\n          \"cId\": \"000002\",\n          \"email\": \"chris@listingslab.com\",\n          \"firstName\": \"Christopher\",\n          \"lastName\": \"Dorward\",\n          \"password\": \"password\",\n          \"deliveryAddress\": \"4 Holst Mead, Stowmarket, IP14 1TD\",\n          \"billingAddress\": \"58 Hampton St S, Goodwood, SA 5034\",\n          \"country\": \"Australia\"\n        },\n        {\n          \"cId\": \"000003\",\n          \"email\": \"listingslab@gmail.com\",\n          \"firstName\": \"Listingslab\",\n          \"lastName\": \"\",\n          \"password\": \"password\",\n          \"deliveryAddress\": \"58 Hampton St S, Goodwood, SA 5034\",\n          \"country\": \"Australia\"\n        },\n        {\n          \"cId\": \"000004\",\n          \"email\": \"michael@aligent.com.au\",\n          \"firstName\": \"Michael\",\n          \"lastName\": \"Wylde\",\n          \"password\": \"password\",\n          \"deliveryAddress\": \"14 Stamford Court, Adelaide, SA 5000\",\n          \"billingAddress\": \"18 Westpac Tower, Adelaide, SA 5000\",\n          \"country\": \"Australia\"\n        },\n        {\n          \"cId\": \"000005\",\n          \"email\": \"william.chambers@aligent.com.au\",\n          \"firstName\": \"William\",\n          \"lastName\": \"Chambers\",\n          \"password\": \"password\",\n          \"deliveryAddress\": \"14 Stamford Court, Adelaide, SA 5000\",\n          \"country\": \"Australia\",\n          \"businessName\": \"Aligent\",\n          \"phonenumber\": \"0422 222 333\"\n        }\n    ]\n};\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/maodels/coupons.js\n * Example giftcards Model\n *\n */\n\nexport default {\n    \"giftcards\": [\n        {\n          \"code\": \"805956452585\",\n          \"amount\": \"100\"\n        },\n        {\n          \"code\": \"0123456789\",\n          \"amount\": \"50\"\n        },\n        {\n          \"code\": \"9876543210\",\n          \"amount\": \"100\"\n        }\n    ]\n};\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/models/orderSummary.js\n * Example Order Summary Model\n *\n */\n\nexport default {\n\"orderSummary\": [\n    {\n      \"sku\": \"000003\",\n      \"title\": \"Fly Away Tankini\",\n      \"image\": \"http://listingslab.com/wp-content/uploads/2017/06/cds53ta5386.900_tiedyeabstraction_flyaway_tankini_1.1489675773.jpg\",\n      \"desc\": \"Fly Away tankinis are in.\",\n      \"size\": \"14\",\n      \"colour\": \"Black\",\n      \"price\": \"199.99\"\n    },\n    {\n      \"sku\": \"000001\",\n      \"title\": \"Jets Arcadia Bandeau\",\n      \"image\": \"http://listingslab.com/wp-content/uploads/2017/06/jetj4954_arcadia_bandeau_4.1496373923.jpg\",\n      \"desc\": \"Jets Arcadia Bandeau\",\n      \"size\": \"10\",\n      \"colour\": \"Blue\",\n      \"price\": \"99.99\"\n    },\n    {\n      \"sku\": \"000002\",\n      \"title\": \"Speedo Mens Avalon Heritage Watershort\",\n      \"image\": \"http://listingslab.com/wp-content/uploads/2017/06/sp1539a6220.960_mens_avalon_heritage_watershort_3.1484384302.jpg\",\n      \"desc\": \"Speedo Mens Avalon Heritage Watershort\",\n      \"size\": \"14\",\n      \"colour\": \"Orange\",\n      \"price\": \"79.99\"\n    }\n  ]\n};\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/maodels/coupons.js\n * Example promocodes Model\n *\n */\n\nexport default {\n    \"promocodes\": [\n        {\n          \"code\": \"25OFF\",\n          \"type\": \"percent\",\n          \"amount\": \"25\"\n        },\n        {\n          \"code\": \"100OFF\",\n          \"type\": \"percent\",\n          \"amount\": \"100\"\n        }\n    ]\n};\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/views/ViewDeliveryPayment.js\n * Delivery Screen\n *\n */\n\nexport default class ViewDeliveryPayment {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  show(){\n    this.main.m.calculateOrderTotal ();\n    jQuery('#middle').html(this.main.v.views.deliverypayment.getDeliveryContent ());\n    jQuery('#delivery-div').hide();\n    jQuery('#delivery-div').fadeIn(this.main.m.data.config.animationDuration);\n    jQuery('#right').html(this.main.v.views.deliverypayment.getPaymentContent ());\n    jQuery('#payment-div').hide();\n    jQuery('#payment-div').fadeIn(this.main.m.data.config.animationDuration);\n    this.main.v.showTotals ();\n    this.main.c.controllers.deliverypayment.setUI();\n  }\n\n  showBillingAddress(){\n    jQuery('#billing-address-hidden').fadeIn(this.main.m.data.config.animationDuration);\n    setTimeout(function(){\n      jQuery('#billing-firstname').focus();\n    }, 500);\n  }\n\n  hideBillingAddress(){\n    jQuery('#billing-address-hidden').hide();\n  }\n\n  showAuthorityToLeave(){\n    jQuery('#input-leave-info').fadeIn(this.main.m.data.config.animationDuration);\n    setTimeout(function(){\n      jQuery('#input-leave-info').focus();\n    }, 500);\n  }\n\n  showManualBilling(){\n    jQuery('#billing-manual-hidden').fadeIn(this.main.m.data.config.animationDuration);\n    setTimeout(function(){\n      jQuery('#billing-street-address').focus();\n    }, 500);\n  }\n\n  hideManualBilling(){\n    jQuery('#billing-manual-hidden').hide();\n  }\n\n  showManualDelivery(){\n    jQuery('#delivery-manual-hidden').fadeIn(this.main.m.data.config.animationDuration);\n  }\n\n  hideAuthorityToLeave(){\n    jQuery('#input-leave-info').fadeOut(this.main.m.data.config.animationDuration);\n  }\n\n  hide(){\n    jQuery('#delivery-div').fadeOut(this.main.m.data.config.animationDuration);\n    jQuery('#payment-div').fadeOut(this.main.m.data.config.animationDuration);\n  }\n\n  getDeliveryContent (){\n    let html = `\n          <div id=\"delivery-div\">\n            <h3 class=\"screen-title\">\n                <span class=\"screen-header\">Delivery</span>\n            </h3>\n            <div class=\"instructions\"></div>\n  \n            <div class=\"form-label\" id=\"firstname-message\" >First Name</div>\n            <input\n              id=\"firstname\"\n              class=\"delivery-input\"\n              type=\"text\"\n              value=\"${this.main.m.data.order.firstName || ''}\"\n            />\n  \n            <div class=\"form-label\" id=\"lastname-message\" >Last Name</div>\n            <input\n              id=\"lastname\"\n              class=\"delivery-input\"\n              type=\"text\"\n              value=\"${this.main.m.data.order.lastName || ''}\"\n            />\n            \n            <div class=\"form-label\" id=\"delivery-address-message\" >Delivery Address</div>\n            <input\n              id=\"delivery-address\"\n              class=\"delivery-input\"\n              type=\"text\"\n              value=\"${this.main.m.data.order.deliveryAddress || ''}\"\n              placeholder=\"\"\n            />\n            \n            <div class=\"delivery-address-not-found\">\n                Your address not there? <a href=\"#\" id=\"address-not-found\" class=\"black-link\">Click here</a>\n            </div>\n            \n            <div id=\"delivery-manual-hidden\">\n            \n              <div class=\"form-label\" id=\"input-delivery-street-address-message\" >Street Address</div>\n              <input\n                id=\"delivery-street-address\"\n                class=\"delivery-input\"\n                type=\"text\"\n              />\n              \n              <div class=\"form-label\" id=\"input-delivery-city-message\" >City</div>\n              <input\n                id=\"delivery-city\"\n                class=\"delivery-input\"\n                type=\"text\"\n              />\n              \n              <div class=\"form-label\" id=\"input-delivery-state-message\" >State</div>\n              <input\n                id=\"delivery-state\"\n                class=\"delivery-input\"\n                type=\"text\"\n              />\n              \n              <div class=\"form-label\" id=\"input-delivery-state-message\" >Postcode</div>\n              <input\n                id=\"delivery-postcode\"\n                class=\"delivery-input\"\n                type=\"text\"\n              />\n              \n            </div>\n            \n            <div class=\"authority\">\n              <input\n                title=\"Authority to leave\" \n                type=\"checkbox\" \n                class=\"checkbox\" \n                id=\"authority-to-leave\"\n              />\n              <label for=\"authority-to-leave\">Authority to leave</label>\n            </div>\n            \n            <div id=\"input-authority\">\n              <input\n                id=\"input-leave-info\"\n                class=\"input-text-field\"\n                type=\"text\"\n                value=\"\"\n              />\n            </div>\n            \n            <div class=\"form-label\" id=\"businessname-message\" >Business Name - <em>Optional</em></div>\n            <input\n              id=\"businessname\"\n              class=\"input-text-field\"\n              type=\"text\"\n              value=\"${this.main.m.data.order.businessName || ''}\"\n            />\n            \n            <div class=\"form-label\" id=\"phone-message\" >Phone Number</div>\n            <input\n              id=\"phonenumber\"\n              class=\"input-text-field\"\n              type=\"text\"\n              value=\"${this.main.m.data.order.phone || ''}\"\n            />\n            \n            <div class=\"billing-address\">\n              <input\n                title=\"Bill to a different address\" \n                type=\"checkbox\" \n                class=\"checkbox\" \n                id=\"bill-to-different\"\n              />\n              <label for=\"bill-to-different\">Bill to a different address</label>\n            </div>\n            \n            <div id=\"billing-address-hidden\">\n            \n              <div class=\"form-label\" id=\"billing-firstname-message\" >First Name</div>\n                <input\n                  id=\"billing-firstname\"\n                  class=\"delivery-input\"\n                  type=\"text\"\n                />\n              \n              <div class=\"form-label\" id=\"billing-lastname-message\" >Last Name</div>\n                <input\n                  id=\"billing-lastname\"\n                  class=\"delivery-input\"\n                  type=\"text\"\n                />\n              \n              <div class=\"form-label\" id=\"billing-address-message\" >Billing Address</div>\n                <input\n                  id=\"billing-address\"\n                  class=\"delivery-input\"\n                  type=\"text\"\n                  placeholder=\"\"\n                />\n                \n              <div class=\"delivery-address-not-found\">\n                Your address not there? <a href=\"#\" id=\"billing-address-not-found\" class=\"black-link\">Click here</a>\n              </div>\n              \n              <div id=\"billing-manual-hidden\">\n                <div class=\"form-label\" id=\"billing-street-address-message\" >Street Address</div>\n                <input\n                  id=\"billing-street-address\"\n                  class=\"billing-input\"\n                  type=\"text\"\n                />\n                \n                <div class=\"form-label\" id=\"billing-city-message\" >City</div>\n                <input\n                  id=\"billing-city\"\n                  class=\"delivery-input\"\n                  type=\"text\"\n                />\n                \n                <div class=\"form-label\" id=\"billing-state-message\" >State</div>\n                <input\n                  id=\"billing-state\"\n                  class=\"delivery-input\"\n                  type=\"text\"\n                />\n                \n                <div class=\"form-label\" id=\"billing-state-message\" >Postcode</div>\n                <input\n                  id=\"billing-postcode\"\n                  class=\"delivery-input\"\n                  type=\"text\"\n                />\n              </div>\n              \n              \n            \n            </div>\n  \n          </div>\n          `;\n    return html;\n  }\n\n  getPaymentContent (){\n    const html = `\n      <div id=\"payment-div\">\n      \n        <h3 class=\"screen-title\">\n          <span class=\"screen-header\">Payment</span>\n        </h3>\n        \n        <div class=\"instructions\">\n          How would you like to pay?\n        </div>\n        \n        <div class=\"payment-options\">\n          <div class=\"card\">\n              <img\n                  class=\"payment-option\"\n                  id=\"card\"\n                  alt=\"Pay with credit card\"\n                  src=\"http://listingslab.com/wp-content/uploads/2017/06/card.png\"\n              />\n          </div>\n          <div class=\"paypal\">\n              <img\n                  class=\"payment-option\"\n                  height=\"57\"\n                  id=\"paypal\"\n                  alt=\"Pay with PayPal\"\n                  src=\"http://listingslab.com/wp-content/uploads/2017/06/paypal.png\"\n              />\n          </div>\n          <div class=\"afterpay\">\n              <img\n                  class=\"payment-option\"\n                  height=\"57\"\n                  id=\"afterpay\"\n                  alt=\"Pay with Afterpay\"\n                  src=\"http://listingslab.com/wp-content/uploads/2017/06/afterpay.png\"\n              />\n          </div>\n        </div>\n        \n        <div class=\"payment-info\" id=\"card-div\">\n          <div id=\"cardnumber-message\" class=\"form-label\">Card Number</div>\n          <input\n              title=\"Card Number\"\n              id=\"cardnumber\"\n              class=\"input-text-field\"\n              type=\"text\"\n          />\n          <div class=\"expiry-cvc\">\n              <div class=\"expiry\">\n                  <div id=\"expiry-message\" class=\"form-label\">Expiry Date (MM/YY)</div>\n                  <input\n                      title=\"Expiry Date\"\n                      id=\"expiry\"\n                      class=\"input-text-field\"\n                      type=\"text\"\n                  />\n              </div>\n              <div class=\"cvc\">\n                  <div id=\"cvc-message\" class=\"form-label\">CVC</div>\n                  <input\n                      title=\"CVC\"\n                      id=\"cvc\"\n                      class=\"input-text-field\"\n                      type=\"text\"\n                  />\n              </div>\n          </div>\n        </div>\n        \n        <div class=\"payment-info\" id=\"paypal-div\">\n            <p>You will be redirected to PayPal complete your order.</p>\n        </div>\n        \n        <div class=\"payment-info\" id=\"afterpay-div\">\n          <p><strong>4 equal payments of $${Math.round((this.main.m.data.order.grandtotal/4) * 100) / 100}</strong></p>\n          <p>Pay for your purchase over four equal fortnightly installments with no interest.\n              Afterpay makes it simple to pay when it suits you best. Available to customers in\n              Australia with a debit or credit card.</p>\n          <p>When you click '<strong>PLACE YOUR ORDER</strong>' you will be redirected to Afterpay\n              to complete your order.</p>\n          <p><a\n                class=\"afterpay-link\"\n                href=\"https://www.afterpay.com.au\"\n                target=\"_blank\"\n          >Find out more</a></p>\n        </div>\n        \n        <div class=\"payment-separator\" />\n        \n        <div id=\"promo-message\" class=\"form-label\">Promo Code</div>\n        <div class=\"promo\">\n          <div class=\"input-promo\">\n              <input\n                  title=\"Promo Code\"\n                  id=\"promocode\"\n                  class=\"input-text-field uppercase-field\"\n                  type=\"text\"\n              />\n          </div>\n          <div class=\"submit-promo\">\n              <input\n                  id=\"apply-promo\"\n                  type=\"button\"\n                  value=\"Apply\"\n              />\n          </div>\n        </div>\n        \n        <div id=\"gift-message\" class=\"form-label\">Gift Card</div>\n        \n        <div class=\"gift\">\n          <div class=\"input-gift\">\n            <input\n              title=\"Gift Card\"\n              id=\"giftcard\"\n              class=\"input-text-field\"\n              type=\"text\"\n            />\n          </div>\n          <div class=\"submit-gift\">\n            <input\n              id=\"redeem-giftcard\"\n              type=\"button\"\n              value=\"Redeem\"\n            />\n          </div>\n        </div>\n        \n        <div class=\"newsletter\">\n          <input\n            type=\"checkbox\"\n            class=\"checkbox\"\n            id=\"newsletter-signup\"\n            title=\"Sign up to newsletter\"\n            checked=\"checked\"\n          />\n          <label for=\"newsletter-signup\">Sign up to Summer Lovers Club to be in the know!</label>\n        </div>\n        \n        <div class=\"free-shipping\" id=\"shipping-message\">\n          You are <span id=\"dollars-short\" class=\"bold\">$xx</span> away from <span class=\"bold\">FREE SHIPPING</span>\n        </div>\n        \n        <div class=\"totals\">\n          <div class=\"subtotal\">\n            <div class=\"total-col\">subtotal</div>\n            <div class=\"total-col flex-right\" id=\"subtotal\">$</div>\n          </div>\n          <div class=\"promocodes\">\n            <div class=\"total-col\">promo codes</div>\n            <div class=\"total-col flex-right\" id=\"promocodes\"></div>\n          </div>\n          <div class=\"giftcards\">\n            <div class=\"total-col\">gift cards</div>\n            <div class=\"total-col flex-right\" id=\"giftcards\"></div>\n          </div>\n          <div class=\"discounts\">\n            <div class=\"total-col\">discounts</div>\n            <div class=\"total-col flex-right\" id=\"discounts\">$</div>\n          </div>\n          <div class=\"shipping\">\n            <div class=\"total-col\">shipping</div>\n            <div class=\"total-col flex-right\" id=\"shipping\">$</div>\n          </div>\n          <div class=\"grandtotal\">\n            <div class=\"total-col\">Grand Total</div>\n            <div class=\"total-col flex-right\" id=\"grandtotal\">$</div>\n          </div>\n        </div>\n        \n        <input\n          id=\"place-order\"\n          class=\"btn-place-order\"\n          type=\"button\"\n          value=\"PLACE YOUR ORDER\"\n        />\n        \n      </div>\n    `;\n    return html;\n  }\n\n}","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/views/ViewEmail.js\n *\n */\n\nexport default class ViewEmail {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  show(){\n    jQuery('#middle').html(this.main.v.views.email.getContent ());\n    jQuery('#email-div').hide();\n    jQuery('#email-div').fadeIn(this.main.m.data.config.animationDuration, this.main.c.controllers.email.setUI.bind(this));\n    setTimeout(function(){\n      jQuery('#email-address').focus();\n    }, 500);\n  }\n\n  showError (message){\n    this.main.v.shakeField(jQuery('#email-address'));\n    jQuery('#email-message').html(`${message}`);\n  }\n\n  hide(){\n    jQuery('#email-div').fadeOut(this.main.m.data.config.animationDuration, this.main.m.getCustomerByEmail.bind(this));\n  }\n\n  getContent (){\n    let html = `\n      <div id=\"email-div\">\n        <h3 class=\"screen-title\">\n            <span class=\"screen-header\">First things first</span>\n        </h3>\n        <div class=\"instructions\">\n            <p>Please enter your email address to continue\n            to delivery &amp; payment.</p>\n        </div>\n        <div id=\"email\">\n            <div class=\"form-label\" id=\"email-message\" >Email Address</div>\n            <input\n              id=\"email-address\"\n              class=\"input-text-field\"\n              type=\"text\"\n              value=\"${this.main.m.data.config.defaultEmail}\"\n            />\n            <input\n              id=\"email-continue\"\n              type=\"button\"\n              value=\"CONTINUE\"\n            />\n        </div>\n      </div>`;\n    return html;\n  }\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/views/ViewLoader.js\n *\n */\n\nexport default class ViewLoader {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  show(message) {\n    jQuery('#middle').html(this.getContent (message));\n    jQuery('#loader-div').hide();\n    jQuery('#loader-div').fadeIn(this.main.m.data.config.animationDuration);\n  }\n\n  hide() {\n    jQuery('#loader-div').fadeOut(this.main.m.data.config.animationDuration, this.main.v.views.password.show.bind(this));\n  }\n\n  getContent(message){\n    let html = `\n      <div id=\"loader-div\">\n\n        <div class=\"loader\">\n            <img\n                alt=\"${message}\"\n                src=\"http://listingslab.com/wp-content/uploads/2017/06/ajax-loader.gif\"\n            />\n            &nbsp;&nbsp;&nbsp;${message}\n        </div>\n      </div>`;\n    return html;\n  }\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/views/ViewPassword.js\n *\n */\n\nexport default class ViewPassword {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  show(){\n    jQuery('#middle').html(this.main.v.views.password.getContent ());\n    jQuery('#password-div').hide();\n    jQuery('#password-div').fadeIn(this.main.m.data.config.animationDuration);\n    this.main.c.controllers.password.setUI();\n    setTimeout(function(){\n      jQuery('#password').focus();\n    }, 500);\n  }\n\n  showError (message){\n    this.main.v.shakeField (jQuery('#password'));\n    jQuery('#password-message').html(`${message}`);\n  }\n\n  hide(){\n    jQuery('#password-div').fadeOut(this.main.m.data.config.animationDuration, this.main.v.views.deliverypayment.show.bind(this));\n  }\n\n  getContent (){\n    let customerType = 'none';\n    const customerObj =  this.main.m.data.customer;\n    if (!customerObj){\n      this.main.m.updateOrder ('customerType', 'new');\n      customerType = 'new';\n    }else{\n      this.main.m.updateOrder ('customerType', 'returning');\n      customerType = 'returning';\n    }\n    let html = ``;\n    if (customerType === 'returning'){\n      html += `\n          <div id=\"password-div\">\n            <h3 class=\"screen-title\">\n                <span class=\"screen-header\">Welcome back!</span>\n            </h3>\n              <div class=\"instructions\">\n              <p>Please enter your password to continue to delivery & payment</p>\n          </div>`;\n    } else if (customerType === 'new') {\n\n      html += `\n            <div id=\"password-div\">\n            <h3 class=\"screen-title\">\n                <span class=\"screen-header\">Welcome Aboard</span>\n            </h3>\n            <div class=\"instructions\">\n              <p>Please create a password to continue to delivery & payment</p>\n            </div>`;\n    }\n\n    html += `\n            <div id=\"password-message\" class=\"form-label\">Password</div>\n            <input\n              id=\"password\"\n              class=\"input-text-field\"\n              type=\"password\"\n              value=\"${this.main.m.data.config.defaultPassword}\"\n            />\n            \n            <input id=\"password-continue\" type=\"button\" value=\"CONTINUE\" />\n          `;\n\n    html += `\n            <div class=\"link-checkout-guest\">\n              <a\n                  href=\"#\"\n                  id=\"guest-checkout\"\n              >Checkout as guest</a>\n            </div>\n          `;\n\n    html += `</div>`;\n    return html;\n  }\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/views/ViewPlaceOrder.js\n *\n */\n\nexport default class ViewPlaceOrder {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  show() {\n    jQuery('#middle').html('');\n    jQuery('#order-div').hide();\n    jQuery('#order-div').fadeIn(this.main.m.data.config.animationDuration);\n    jQuery('.debug').show();\n  }\n\n\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/MVC/views/ViewSummary.js\n * Order Summary\n *\n */\n\nexport default class ViewSummary {\n\n  constructor(main) {\n    this.main = main;\n  }\n\n  show(){\n    jQuery('#left').html(this.getContent ());\n    jQuery('#summary-div').hide();\n    jQuery('#summary-div').fadeIn(this.main.m.data.config.animationDuration);\n  }\n\n  hide(){\n    jQuery('#summary-div').fadeOut(this.main.m.data.config.animationDuration);\n  }\n\n  getContent (){\n    const summaryArr = this.main.m.data.orderSummary;\n    let html = `\n      <div id=\"summary-div\">\n        <h3 class=\"screen-title\">\n            <span class=\"screen-header\">\n               Order Summary\n            </span>\n        </h3>\n        <div class=\"summary-total\">${summaryArr.length} Items</div>\n      `;\n    for (let i = 0; i<summaryArr.length; i++) {\n      let div = `<div id=\"\" class=\"summary-item\">`;\n      div += `<div class=\"summary-item-image\">\n                  <img\n                src=\"${summaryArr[i].image}\"\n                alt=\"${summaryArr[i].desc}\"\n                />\n              </div>`;\n      div += `<div class=\"summary-item-info\">\n                  <div class=\"item-title\">${summaryArr[i].title}</div>\n                  <div class=\"item-price\">$${summaryArr[i].price}</div>\n                  <div class=\"item-size\">Size ${summaryArr[i].size}</div>\n                  <div class=\"item-colour\">Colour ${summaryArr[i].colour}</div>\n              </div>`;\n      div += `</div>`;\n      html += div;\n    }\n    html += `<a\n                href=\"?shoppingbag=true\"\n                title=\"back\"\n                class=\"black-link font-small\"\n                >&lt; Back to Shopping Bag</a>`;\n    html += `</div>`;\n    return html;\n  }\n}\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/main.js\n * Main JavaScript entry\n */\n\nimport Model from './MVC/Model';\nimport View from './MVC/View';\nimport Controller from './MVC/Controller';\nimport packageJSON from '../../package.json';\nimport shake from './utils/jquery.ui.shake';\n// import TweenLite from './utils/TweenLite.min';\n\nexport default class Main {\n\n  constructor() {\n\n    // Instantiate MVC Classes. See https://tinyurl.com/yaqgy73w\n    this.m = new Model(this);\n    this.v = new View(this);\n    this.c = new Controller(this);\n\n    // Create an array of instantiated classes and Set Dependents\n    const dependents = [this.m, this.v, this.c];\n    this.m.setDependents(dependents);\n    this.v.setDependents(dependents);\n    this.c.setDependents(dependents);\n  }\n}\n\n// Run the Main class as soon as we can...\nlet main = new Main();\n\n// ... but wait till the dom has loaded before trying to do anything with it\njQuery( document ).ready(function() {\n\n  // What version are we? Change this up in /package.json\n  const vs = `${packageJSON.name} vs ${packageJSON.version}\\n`;\n  console.log (vs);\n\n  // Show the initial screens after a moment's loading delay (to simulate ajax loading)\n  setTimeout(function(){\n    // Kick off the application by showing the summary and the email capture form\n    main.v.views.summary.show();\n    main.v.views.email.show();\n  }, main.m.data.config.loadingDelay);\n\n\n  // Show the debugger if the config flag is set\n  if (!main.m.data.config.debugger){\n    jQuery('.debug').hide();\n  }else{\n    main.m.debugger();\n  }\n\n});\n","/**\n * Aligent CheckItOut\n *\n * @category   Aligent\n * @package    aligent-checkitout\n * @copyright  Copyright (c) 2017 Aligent\n * @author     Chris Dorward <chris.dorward@aligent.com.au>\n *\n * src/js/config.js\n * Config Model\n *\n * william.chambers@aligent.com.au, password\n * michael@aligent.com.au, password\n * chris.dorward@aligent.com.au, password\n * random@example.com, password\n */\n\nexport default {\n  \"config\": {\n    \"debugger\": false,\n    \"defaultEmail\": \"\",\n    \"defaultPassword\": \"\",\n    \"cssTransitionDuration\": 750,\n    \"animationDuration\": 400,\n    \"loadingDelay\": 500,\n    \"emailCheckDelay\": 500,\n    \"freeShippingMin\": 100\n  }\n};\n","(function($) {\n\t$.fn.shake = function(o) {\n\t\tif (typeof o === 'function')\n\t\t\to = {callback: o};\n\t\t// Set options\n\t\tvar o = $.extend({\n\t\t\tdirection: \"left\",\n\t\t\tdistance: 5,\n\t\t\ttimes: 3,\n\t\t\tspeed: 100,\n\t\t\teasing: \"swing\"\n\t\t}, o);\n\n\t\treturn this.each(function() {\n\n\t\t\t// Create element\n\t\t\tvar el = $(this), props = {\n\t\t\t\tposition: el.css(\"position\"),\n\t\t\t\ttop: el.css(\"top\"),\n\t\t\t\tbottom: el.css(\"bottom\"),\n\t\t\t\tleft: el.css(\"left\"),\n\t\t\t\tright: el.css(\"right\")\n\t\t\t};\n\n\t\t\tel.css(\"position\", \"relative\");\n\n\t\t\t// Adjust\n\t\t\tvar ref = (o.direction == \"up\" || o.direction == \"down\") ? \"top\" : \"left\";\n\t\t\tvar motion = (o.direction == \"up\" || o.direction == \"left\") ? \"pos\" : \"neg\";\n\n\t\t\t// Animation\n\t\t\tvar animation = {}, animation1 = {}, animation2 = {};\n\t\t\tanimation[ref] = (motion == \"pos\" ? \"-=\" : \"+=\")  + o.distance;\n\t\t\tanimation1[ref] = (motion == \"pos\" ? \"+=\" : \"-=\")  + o.distance * 2;\n\t\t\tanimation2[ref] = (motion == \"pos\" ? \"-=\" : \"+=\")  + o.distance * 2;\n\n\t\t\t// Animate\n\t\t\tel.animate(animation, o.speed, o.easing);\n\t\t\tfor (var i = 1; i < o.times; i++) { // Shakes\n\t\t\t\tel.animate(animation1, o.speed, o.easing).animate(animation2, o.speed, o.easing);\n\t\t\t};\n\t\t\tel.animate(animation1, o.speed, o.easing).\n\t\t\tanimate(animation, o.speed / 2, o.easing, function(){ // Last shake\n\t\t\t\tel.css(props); // Restore\n\t\t\t\tif(o.callback) o.callback.apply(this, arguments); // Callback\n\t\t\t});\n\t\t});\n\t};\n})(jQuery);\n"]}